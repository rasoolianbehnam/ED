import socket

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind(('0.0.0.0', 9918))
s.listen(5)
c, a = s.accept()

#print "Connection establshed from %s"%a
print a
received = ""
while True:
    c.send('mardas\r\n')
    request = c.recv(1024)
    if request:
        received += request
    else:
        break
if len(received) < 500 * 2**3:
    print "Received: %s"%received
else:
    with open('mardas', 'wb') as f:
        f.write(received)
c.close()
